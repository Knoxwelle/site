(function(e,t){"use strict";e.extend(t,{imBlog:{separator:'<div class="imBlogSeparator"></div>\n',paginate:function(e,n,r,i){var s='<div class="imBlogPagination">',o=t.l10n.get,u=Math.ceil(i/r),a=n/r+1;if(u<2)return"";n>0&&(s+='<a href="'+e+"start="+(n-r)+"&length="+r+'">'+o("blog_pagination_prev","&lt;&lt; Newer posts")+"</a>");var f=!1,l=!1;for(var c=1;c<=u;c++)u<7||c==1||c==u||c>=a-1&&c<=a+1?s+="<a "+(c==a?'class="imBlogPaginationCurrent" ':"")+'href="'+e+"start="+r*(c-1)+"&length="+r+'">'+c+"</a>":c<a-1&&!f?(s+="<span>...</span>",f=!0):c>a+1&&!l&&(s+="<span>...</span>",l=!0);return i>n+r&&(s+='<a href="'+e+"start="+(n+r)+"&length="+r+'">'+o("blog_pagination_next","Older posts &gt;&gt;")+"</a>"),s+="</div>",s},showPost:function(e,n){n=n||0;var r="",i=t.l10n.get,s=t.settings.imBlog,o=s.posts[e],u="";if(!o)return;if(n!==0){var a=o.timestamp.split("/");a[1]=i("date_full_months")[a[1]-1],a=a.join(" ");var f=o.cover!==""?'<div id="imBlogPostCover_'+e+'" class="imBlogPostCover"></div>':"";s.article_type=="covertitlecontents"&&(r+=f),r+='<h2 id="imPgTitle" style="display: block;">'+o.title+"</h2>",r+='<div class="imBreadcrumb" style="display: block;">'+i("blog_published_by")+"<strong> "+o.author+" </strong>",r+=i("blog_in")+' <a href="?category='+o.category.replace(/[\s]{1}/g,"_")+'">'+o.category+"</a> &#149; "+a;if(o.tag.length>0){r+="<br />Tags: ";var l=[];for(var c=0;c<o.tag.length;c++)l.push('<a href="?tag='+o.tag[c]+'">'+o.tag[c]+"</a>");r+=l.join(",&nbsp;")}r+="</div>",s.article_type=="titlecovercontents"&&(r+=f),r+='<div class="imBlogPostBody">',r+=o.body;if("media"in o||"slideshow"in o)r+='<div class="imBlogMedia">',"media"in o&&!!o.mediahtml&&(r+=o.mediahtml),"slideshow"in o&&!!o.slideshow&&(r+=o.slideshow),r+="</div>";if(o.sources.length>0){r+='<div class="imBlogSources">',r+="<b>"+i("blog_sources")+":</b><br />",r+="<ul>";for(var h=0;h<o.sources.length;h++)r+="<li>"+o.sources[h]+"</li>";r+="</ul></div>"}r+=(!s.addThis||!s.addThis?"":"<br />"+s.addThis)+"<br /><br /></div>",s.comments&&(s.comments_source=="wsx5"?s.comment_type!="stars"?(r+='<div class="topic-comments">',r+='<div class="topic-summary">',r+="<div>"+i("blog_no_comment")+"</div>",r+="</div>",r+='<div class="topic-form">',r+='<form id="blogComment" action="#">',r+='<div class="topic-form-row">',r+='<label for="form_name" style="float: left; width: 100px;">'+i("blog_name")+'*</label> <input type="text" id="form_name" name="name" class="mandatory" />',r+="</div>",r+='<div class="topic-form-row">',r+='<label for="form_email" style="float: left; width: 100px;">'+i("blog_email")+'*</label> <input type="text" id="form_email" name="email" class="mandatory valEmail" />',r+="</div>",r+='<div class="topic-form-row">',r+='<label for="form_url" style="float: left; width: 100px;">'+i("blog_website")+'</label> <input type="text" id="form_url" name="url" />',r+="</div>",s.comment_type!="comment"&&(r+='<div class="topic-form-row">',r+='<label for="blog-rating" style="float: left; width: 100px;vertical-align: middle;">'+i("blog_rating")+"*</label>",r+='<span class="topic-star-container-big variable-star-rating">',r+='<span class="topic-star-fixer-big" style="width: 0;"></span>',r+="</span>",r+="</div>"),r+='<div class="topic-form-row">',r+='<label for="form_body" style="clear: both; width: 100px;">'+i("blog_message")+'*</label><textarea id="form_body" name="body" class="mandatory" style="width: 99%; height: 100px;"></textarea>',r+="</div>",s.captcha&&(r+=s.captcha),r+='<div class="topic-form-row" style="text-align: center; margin-bottom: 15px;"><input type="button" value="'+i("blog_send")+'" class="imBlogCommentSubmitBtn" onclick="x5engine.imBlog.offlineCheck()"/></div>',r+="</form>",r+="</div>",r+="</div>"):(r+='<div style="text-align: center" class="topic-comments">',r+='<div style="margin-bottom: 5px;">'+i("blog_vote","Average Vote")+": 0/5</div>",r+='<div class="topic-star-container-big variable-star-rating">',r+='<span class="topic-star-fixer-big" style="width: 0%;"></span>',r+="</div>",r+="</div>"):r+=s.comments_code)}else{r+='<div class="imBlogPostCard'+(o.cover!==""?" imBlogPostCardWithCover":"")+'">',o.cover!==""&&s.card_type!="topcontentsbottomcover"&&(r+='<div id="imBlogPostCardCover_'+e+'" class="imBlogPostCardCover" onclick="window.location=\''+o.rel_url+"';\"></div>"),s.show_card_title&&(r+='<div class="imBlogPostCardTitle"><a href="'+o.rel_url+'">'+o.title+"</a></div>"),s.show_card_category&&(r+='<div class="imBlogPostCardCategory"><a href="?category='+o.category.replace(/[\s]{1}/g,"_")+'">'+o.category+"</a></div>"),o.cover!==""&&s.card_type=="topcontentsbottomcover"&&(r+='<div id="imBlogPostCardCover_'+e+'" class="imBlogPostCardCover" onclick="window.location=\''+o.rel_url+"';\"></div>"),s.show_card_description&&(r+='<div class="imBlogPostCardDescription">'+o.summary+"</div>");if(s.show_card_author||s.show_card_date)r+='<div class="imBlogPostCardDetails">',r+=t.imBlog.separator,s.show_card_author&&(r+='<span class="imBlogPostCardAuthor">'+o.author+"</span>"),s.show_card_date&&(s.show_card_author&&(r+=" | "),r+='<span class="imBlogPostCardDate">'+o.timestamp+"</span>"),r+="</div>";s.show_card_button&&(r+='<div class="imBlogPostCardButton"><a href="'+o.rel_url+'">'+i("blog_read_all")+"</a></div>"),r+="</div>"}return r},showPosts:function(e,n,r){var i=e.length<n+r?e.length:n+r;if(n>=e.length||i<=n)return;var s="";t.settings.imBlog.highlight_mode!="none"&&n<t.settings.imBlog.highlighted_count&&(s+='<div class="imBlogHighlightedCards">');for(var o=n;o<i;o++)t.settings.imBlog.highlight_mode!="none"&&n<t.settings.imBlog.highlighted_count&&o==t.settings.imBlog.highlighted_count&&(t.settings.imBlog.highlight_mode=="slideshow"&&t.settings.imBlog.highlighted_count-n>1&&i-n>1&&(s+='<div class="imBlogHighlightedBefore">&laquo;</div>',s+='<div class="imBlogHighlightedAfter">&raquo;</div>',s+="<script>x5engine.boot.push(function () { x5engine.blogHighlightedSlideshow.start(); });</script>"),s+="</div>"),s+=t.imBlog.showPost(e[o],0);return t.settings.imBlog.highlight_mode!="none"&&i<=t.settings.imBlog.highlighted_count&&(t.settings.imBlog.highlight_mode=="slideshow"&&t.settings.imBlog.highlighted_count-n>1&&i-n>1&&(s+='<div class="imBlogHighlightedBefore">&laquo;</div>',s+='<div class="imBlogHighlightedAfter">&raquo;</div>',s+="<script>x5engine.boot.push(function () { x5engine.blogHighlightedSlideshow.start(); });</script>"),s+="</div>"),s},offlineCheck:function(){t.imForm.validate("#blogComment",{type:"tip",showAll:!0})&&t.utils.showOfflineMessage(t.l10n.get("blog_offline_message"))},showCategory:function(e){var n="",r=t.settings.imBlog.posts_cat[unescape(e)],i=t.utils.getParam("start"),s=t.utils.getParam("length");i=i?Math.max(i,0):0,s=s?Math.max(s,1):t.settings.imBlog.home_posts_number;if(!r)return;return r.length?(n+=t.imBlog.showPosts(r,i,s),n+=t.imBlog.paginate("?category="+e+"&",i,s,r.length)):n+='<div class="imBlogEmpty">Empty category</div>',n},showMonth:function(e){var n="",r=t.settings.imBlog.posts_month[e],i=t.utils.getParam("start"),s=t.utils.getParam("length");i=i?Math.max(i,0):0,s=s?Math.max(s,1):t.settings.imBlog.home_posts_number;if(!r)return;return r.length?(n+=t.imBlog.showPosts(r,i,s),n+=t.imBlog.paginate("?month="+e+"&",i,s,r.length)):n+='<div class="imBlogEmpty">Empty month</div>',n},showSearch:function(e){var n="",r=t.settings.imBlog.posts_ids,i=0,s=t.utils.getParam("start"),o=t.utils.getParam("length"),u=[],a=0;s=s?Math.max(s,0):0,o=o?Math.max(o,1):t.settings.imBlog.home_posts_number;if(!r)return;if(!r.length)n+='<div class="imBlogEmpty">Empty blog</div>';else{for(a=0;a<r.length;a++){var f=t.settings.imBlog.posts[r[a]];(f.title.indexOf(e)!=-1||f.summary.indexOf(e)!=-1||f.body.indexOf(e)!=-1)&&u.push(f.id)}n+=t.imBlog.showPosts(u,s,o),n+=t.imBlog.paginate("?search="+e+"&",s,o,u.length),u.length===0&&(n+='<div class="imBlogEmpty">Empty search</div>')}return n},showLast:function(e){var n=t.settings.imBlog.posts_ids,r="",i=t.utils.getParam("start"),s=t.utils.getParam("length");i=i?Math.max(i,0):0,s=s?Math.max(s,1):e;if(!n)return;return n.length?(r+=t.imBlog.showPosts(n,i,s),r+=t.imBlog.paginate("?",i,s,n.length)):r+='<div class="imBlogEmpty">Empty blog</div>',r},showTag:function(e){var n=t.settings.imBlog.posts_ids,r="",i=[],s=t.utils.getParam("start"),o=t.utils.getParam("length");s=s?Math.max(s,0):0,o=o?Math.max(o,1):t.settings.imBlog.home_posts_number;if(!n)return;if(!n.length)r+='<div class="imBlogEmpty">Empty blog</div>';else{for(var u=0;u<n.length;u++){var a=t.settings.imBlog.posts[n[u]].tag,f=!1;for(var l=0;l<a.length;l++)a[l]==e&&i.push(n[u])}r+=t.imBlog.showPosts(i,s,o)}return r},show:function(){var n=t.imBlog,r=t.utils.getParam,i=t.settings.imBlog.posts_slug,s=e("#imBlogContent");if(!t.utils.isOnline()){s.empty();var o=location.search.replace(/^[\?]+/gi,"");i[o]?(e("#imBlogPage").removeClass("imBlogHome").addClass("imBlogArticle"),s.append(n.showPost(i[o],1))):r("id")?(e("#imBlogPage").removeClass("imBlogHome").addClass("imBlogArticle"),s.append(n.showPost(r("id"),1))):(e("#imBlogPage").removeClass("imBlogArticle").addClass("imBlogHome"),r("category")?s.append(n.showCategory(r("category"))):r("tag")?s.append(n.showTag(r("tag"))):r("month")?s.append(n.showMonth(r("month"))):r("search")?s.append(n.showSearch(r("search"))):s.append(n.showLast(t.settings.imBlog.home_posts_number))),t.topic({target:".topic-comments"})}}}})})(_jq,x5engine),function(e,t){"use strict";e.extend(t,{offlineNotify:{NOTIFICATION_CLASS_NAME:"im-offline-notification",CONTAINER_ID_NAME:"imNotificationContainer",notificationCount:0,notify:function(n){var r='<svg class="notificationClose" viewBox="0 0 1792 1792" xmlns="http://www.w3.org/2000/svg"><path d="M1490 1322q0 40-28 68l-136 136q-28 28-68 28t-68-28l-294-294-294 294q-28 28-68 28t-68-28l-136-136q-28-28-28-68t28-68l294-294-294-294q-28-28-28-68t28-68l136-136q28-28 68-28t68 28l294 294 294-294q28-28 68-28t68 28l136 136q28 28 28 68t-28 68l-294 294 294 294q28 28 28 68z"/></svg>';n=e.extend(!0,{message:t.l10n.get("blog_offline_message"),level:"attention",notificationWidth:300,notificationTimeRemove:5e3,notificationDelay:500,marginBetweenNotification:10,category:null,color:null,elementClose:r},n);var i={message:n.message,level:n.level};t.offlineNotify.notificationCount++,e("#"+t.offlineNotify.CONTAINER_ID_NAME).length>0?n.category!==null?e("#"+t.offlineNotify.CONTAINER_ID_NAME).find("[data-category='"+n.category+"']").length>0?t.offlineNotify.notificationCount--:t.offlineNotify.showNotificationTimeout(n,i):t.offlineNotify.showNotificationTimeout(n,i):(t.offlineNotify.createContainer(),t.offlineNotify.showNotification(n,i))},createContainer:function(){e("<div id='"+t.offlineNotify.CONTAINER_ID_NAME+"' />").appendTo("body")},showNotificationTimeout:function(e,n){var r=this;r.newNotification=n;var i=e.notificationDelay;if(i>0)var s=setTimeout(function(){t.offlineNotify.showNotification(e,r.newNotification)},t.offlineNotify.notificationCount*i);else t.offlineNotify.showNotification(e,r.newNotification)},showNotification:function(n,r){var i=e("<div class='offline-notification-wrapper'/>"),s=e("<div class=' "+t.offlineNotify.NOTIFICATION_CLASS_NAME+" "+r.level+"'/>").css({marginLeft:n.notificationWidth+10+"px",marginTop:n.marginBetweenNotification+"px"}).append("<p>"+r.message+"</p>").appendTo("body");n.color!==null&&e(s).css("background-color",n.color),n.category!==null&&e(s).attr("data-category",n.category);var o=e("<div class='close-notification'>"+n.elementClose+"</div>").click(function(){t.offlineNotify.close(s)}).appendTo(s);s.appendTo(i),e("#"+t.offlineNotify.CONTAINER_ID_NAME).prepend(i),setTimeout(function(){t.offlineNotify.removeNotification(s)},n.notificationTimeRemove)},close:function(e){t.offlineNotify.removeNotification(e)},removeNotification:function(n){e(n).addClass("im-notification-fade-out"),setTimeout(function(){e(n).parent().remove(),t.offlineNotify.notificationCount--,t.offlineNotify.notificationCount<1&&(e("#"+t.offlineNotify.CONTAINER_ID_NAME).remove(),t.offlineNotify.notificationCount=0)},500)}}})}(_jq,x5engine),function(e,t){"use strict";e.extend(!0,t,{responsive:{showOrderingPositions:function(n){var r=e("body"),i=e(window);n=e.extend(!0,{onObjectClick:null},n),e("[data-responsive-sequence-number]").each(function(){var s=e(this),o=s.attr("data-responsive-sequence-number"),u=null,a=null,f=e('<div class="responsive-sequence-box"><div class="sequence-box-background"></div><div class="sequence-number-background"></div><div class="sequence-number">'+o+"</div>"+"</div>"),l=function(){u=t.utils.offset(s),f.css({top:u.top,left:u.left,"z-index":t.settings.zIndex.sequenceNumbers}).outerWidth(s.innerWidth()).outerHeight(s.innerHeight())};e.isFunction(n.onObjectClick)&&f.click(n.onObjectClick),r.append(f),l(),i.on("resize.sequence-number",function(){clearTimeout(a),a=setTimeout(l,10)})})},hideOrderingPositions:function(){e(".responsive-sequence-box").remove(),e(window).off(".sequence-number")}}})}(_jq,x5engine),function(e,t){"use strict";e.extend(t.utils,{offlineMessageTimeout:null,showOfflineMessage:function(n,r,i,s,o,u){if(t.utils.isOnline())return!1;var a={};try{a=JSON.parse(n),a=e.extend({message:"",level:"attention",color:null,category:escape(n),notificationDelay:500},a)}catch(f){a.message=n,s!==undefined&&(a.level=s),i!==undefined&&(a.color=i),o===undefined?a.category=escape(n):a.category=escape(o),u!==undefined&&(a.notificationDelay=u)}return t.offlineNotify.notify(a),!0}})}(_jq,x5engine);